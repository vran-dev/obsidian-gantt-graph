<script type="text/javascript" src="https://unpkg.com/moment@latest"></script>
<script
	type="text/javascript"
	src="https://unpkg.com/vis-data@latest/peer/umd/vis-data.min.js"
></script>
<script
	type="text/javascript"
	src="https://unpkg.com/vis-timeline@latest/peer/umd/vis-timeline-graph2d.min.js"
></script>
<link
	rel="stylesheet"
	type="text/css"
	href="https://unpkg.com/vis-timeline/styles/vis-timeline-graph2d.min.css"
/>
<!-- You may include other packages like Vis Network or Vis Graph3D here. -->
<!-- You can optionally include locales for Moment if you need any. -->
<style>
	.task-item {
		display: flex;
		 flex-direction: row; 
		 align-items: center; 
		 border-radius: 6px; 
		 padding: 2px; 
		 background-color: rgba(234, 234, 234, 0.2); 
		 padding: 6px 3px 6px 3px;
	}
	.task-item .content {
		margin-right: 12px;
	}
	.task-item .status {
		display: flex; flex-direction: row; align-items: center; border-radius: 12px;background-color: rgba(4, 114, 4, 0.2);padding: 3.5px 6px 3.5px 6px;
	}
	.task-item .status span {
		margin-right: 3px;
	}
	.task-item .status .indicator{
		width: 10px;height: 10px; background-color: rgb(13, 144, 13); border-radius: 50%;margin-right: 5px;
	}
	.task-item .status .text{
		font-size: 12px;
	}

</style>

<div id="visualization" class="gantt-chart-container "></div>

<div>
	<h1>hello</h1>
		
		<span class="task-item">
			<span class="content">
				20231128 通过 IKEA APP 扫码注册成为会员赠送 Prime Card
			</span>
			<span class="status">
				<span class="indicator"></span>
				<span class="text">TODO</span>
		</span>
		</span>
	</div>
</div>
<link rel="stylesheet" type="text/css" href="./styles.css">
<script type="text/javascript">
	// DOM element where the Timeline will be attached
	const container = document.getElementById("visualization");

	const groups = new vis.DataSet([
		{
			id: 1,
			content: "Group 1",
			className: "red",
		},
		{
			id: 2,
			content: "Group 3",
		},

		{
			id: 33,
			content: "Group 3",
			className: "red",
		},
		{
			id: 34,
			content: "Group 4",
		},
	]);
	function customOrder(a, b) {
		// order by id
		return a.id - b.id;
	}
	// Create a DataSet (allows two way data-binding)
	const items = new vis.DataSet([
		{
			id: 4,
			content: "item 4",
			start: "2023-04-16",
			end: "2023-12-15",
			group: 2,
			className: "default-vis-item",
			order: customOrder,
		},
		{
			id: 5,
			content: "item 5",
			start: "2023-11-01",
			end: "2023-12-04",
			group: 2,
			className: "default-vis-item",

			order: customOrder,
		},
		{
			id: 6,
			content: "item 6",
			className: "default-vis-item",
			start: "2023-06-01",
			end: "2023-12-04",
			group: 2,
			order: customOrder,
		},
		{
			id: 1,
			content: "item 1",
			start: "2023-04-20",
			group: 1,
			order: customOrder,
			className: "default-vis-item",
		},
		{
			id: 2,
			className: "default-vis-item",
			content: "item 2 item 2 item 2",
			start: "2023-04-14 00:00:00",
			end: "2023-04-14 23:59:59",
			title: "this is title!2",
			group: 1,
			order: customOrder,
		},
		{
			id: 3,
			className: "default-vis-item",
			content: "item 3",
			start: "2023-04-18",
			group: 1,
			order: customOrder,
		},
		{
			id: 7,
			className: "default-vis-item",
			content: "item 7",
			start: "2023-12-01",
			group: 1,
			order: customOrder,
		},
		{
			id: 8,
			content: "item 8",
			start: "2022-02-01",
			end: "2023-12-04",
			title: "<h1>this is title!</h1>",
			group: 1,
			className: "default-vis-item",
			order: customOrder,
			age: 18,
		},
		{
			id: 9,
			content: "这是9个任务",
			start: "2023-12-15",
			end: "2023-12-15 23:59:59",
			title: "Hi",
			group: 1,
			className: "default-vis-item",
			order: customOrder,
			age: 18,
		},
	]);

	// Configuration for the Timeline
	const oneWeeksAgo = new Date();
	oneWeeksAgo.setDate(oneWeeksAgo.getDate() - 7);
	const options = {
		tooltip: {
			followMouse: false,
			template: function (item, element, data) {
				const tips = `
<div class="tips-card"><h1>${item.title}</h1>
<p>start: ${item.start.getFullYear()}-${
					item.start.getMonth() + 1
				}-${item.start.getDay()}</p>
    `;
				return tips;
			},
		},
		timeAxis: {scale: 'day', step: 1},
		start: oneWeeksAgo,
		groupHeightMode: "fixed",
		orientation: {
			axis: "top",
			item: "top",
		},
	};

	// Create a Timeline
	const timeline = new vis.Timeline(container, items, options);
	timeline.setGroups(groups);
	timeline.on("click", function (properties) {
		console.log("click", properties);
	});
</script>
